<!DOCTYPE html>
<html layout:decorate="~{base}" xmlns:th="http://www.thymeleaf.org"
	style="height: auto;">

<div class="row mb-2" layout:fragment="content-header">
	<div class="col-sm-6">
		<h1>Input Profile</h1>
	</div>
	<!--             <div class="col-sm-6"> -->
	<!--               <ol class="breadcrumb float-sm-right"> -->
	<!--                 <li class="breadcrumb-item"><a href="#">Home</a></li> -->
	<!--                 <li class="breadcrumb-item active">General Form</li> -->
	<!--               </ol> -->
	<!--             </div> -->
</div>

<div layout:fragment="content-body">

	<div class="card card-primary">
		<div class="card-header">
			<h3 class="card-title">Biodata</h3>
		</div>
		<!-- /.card-header -->
		<!-- form start -->
		<form role="form" id="formprofile">
			<div class="card-body">

				<div class="form-group">
					<label for="nama">Nik</label> <input type="text"
						class="form-control" id="nik" name="nik" placeholder="Nik">
				</div>

				<div class="form-group">
					<label>Nama</label> <input type="text"
						class="form-control" id="name" name="name" placeholder="Nama">
				</div>

				<div class="form-group">
					<label>Alamat</label> <input type="text"
						class="form-control" id="adress" name="adress"
						placeholder="Alamat">
				</div>
				
				<div class="form-group">
					<label>Nomor hp</label> <input type="text"
						class="form-control" id="hp" name="hp" placeholder="Nomor hp">
				</div>

				<div class="form-group">
					<label>Tanggal Lahir</label> <input type="date"
						class="form-control" id="tgl" name="tgl">
				</div>

				<div class="form-group">
					<label>Tempat Lahir</label> <input class="form-control"
						type="text" id="tempatLahir" name="tempatLahir">

				</div>

			</div>

			<!-- /.card-body -->

			<div class="card-footer">
				<button id="button" type="submit" class="btn btn-primary success">Submit</button>
			</div>
		</form>
	</div>

</div>

<th:block layout:fragment="add-scripts">
	<script type="text/javascript">
		$('#formprofile').submit(

			function (event) {
				event.preventDefault();
				var $inputs = $('#formprofile :input');
				var values = {};
				$inputs.each(function () {
				});
				$('#bodytable').append(
					"<tr><td>" + $("#name").val() + "</td><td>"
					+ $("#adress").val() + "</td><td>"
					+ $("#birthday").val() + "</td><td>"
					+ $("#age").val() + "</td><td>"
					+ $('#religion option:selected').val()
					+ "</td><td>"
					+ $('input[name=gender]:checked').val()
					+ "</td></tr>");
				$("input[type=text],textarea").val("");
				$("input[type=date],textarea").val("");

			});
		

		// AJAX code to submit form.
		    $.ajax({
		    // instead of type use method
		    method: "POST",
		    url: "http://localhost:1616/person",
		    // instead  dataString i just serialize the form like below this serialize function bind all data into a string so no need to worry about url endcoding
		    data: $('#form_id').serialize(),
		    cache: false,
		    success: function(responseText) {
		        // you can see the result here
		        console.log(responseText)
		        alert("ok"); 
		    }
		    });
		}
		
	</script>

	<script type="text/javascript">
		$(document).ready(function () {
			$('#resetbutton').click(function () {
				$("#mytable").find("tr:gt(0)").remove();
			});
		});
	</script>

	<script type="text/javascript">
		$('.success').click(function () {
			const Toast = Swal.mixin({
				toast: true,
				position: 'top-end',
				showConfirmButton: false,
				timer: 3000,
				timerProgressBar: true,
				onOpen: (toast) => {
					toast.addEventListener('mouseenter', Swal.stopTimer)
					toast.addEventListener('mouseleave', Swal.resumeTimer)
				}
			})

			Toast.fire({
				icon: 'success',
				title: 'Profile entered successfully'
			})
		});

		$('.resetbutt').click(function () {

			Swal.fire({
				title: 'Table is reset',
				width: 600,
				padding: '3em',
				background: '#fff url(/images/trees.png)',
				backdrop: `
				    rgba(192,192,192,0.3)
				    url("https://tenor.com/view/nyancat-gif-5210927")
				    left top
				    no-repeat
				  `
			})

		});
	</script>



</th:block>


</html>